<!-- src/app/modals/habit-details/habit-details.page.html -->
<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{habit.name}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Hero Section -->
  <div class="hero-section" [style.background]="habit.color + '22'">
    <div class="streak-container">
      <div class="streak-badge">
        <ion-icon name="flame" [style.color]="habit.color"></ion-icon>
        <span class="streak-count">{{habit.streak}}</span>
      </div>
      <span class="streak-label">Tage Streak</span>
    </div>
    
    <div class="progress-container">
      <div class="progress-circle">
        <span class="progress-text">{{habit.progress}}%</span>
      </div>
      <span class="progress-label">Erfolgsrate</span>
    </div>
  </div>

  <!-- Segment Control -->
  <ion-segment [(ngModel)]="selectedSegment" class="custom-segment ion-margin-vertical">
    <ion-segment-button value="entries">
      <ion-label>EintrÃ¤ge</ion-label>
    </ion-segment-button>
    <ion-segment-button value="stats">
      <ion-label>Statistiken</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Content based on segment -->
  <div [ngSwitch]="selectedSegment">
    <div *ngSwitchCase="'entries'">
      <ion-list>
        <ion-item-group>
          <ion-item-divider sticky>
            <ion-label>Heute</ion-label>
          </ion-item-divider>
          
          <ion-item *ngFor="let entry of habit.entries">
            <ion-thumbnail slot="start" *ngIf="entry.type === 'image'">
              <img [src]="entry.content" alt="Entry image">
            </ion-thumbnail>
            <ion-icon 
              *ngIf="entry.type === 'audio'" 
              name="musical-note" 
              slot="start"
              color="primary">
            </ion-icon>
            <ion-label>
              <h3>{{entry.date | date:'HH:mm'}}</h3>
              <p *ngIf="entry.type === 'text'">{{entry.content}}</p>
            </ion-label>
            <ion-button fill="clear" slot="end" *ngIf="entry.type === 'audio'">
              <ion-icon name="play"></ion-icon>
            </ion-button>
          </ion-item>
        </ion-item-group>
      </ion-list>
    </div>

    <div *ngSwitchCase="'stats'">
      <!-- Statistiken hier -->
      <ion-card>
        <ion-card-content>
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-value">{{habit.streak}}</span>
              <span class="stat-label">LÃ¤ngste Serie</span>
            </div>
            <div class="stat-item">
              <span class="stat-value">{{habit.progress}}%</span>
              <span class="stat-label">Durchschnitt</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>
