<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="ion-text-center">
      Statistiken
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="stats-grid">
    <ion-card class="stat-card">
      <ion-card-content>
        <ion-icon name="trophy-outline" color="warning"></ion-icon>
        <div class="stat-value">{{overallStats.maxStreak}}</div>
        <div class="stat-label">Beste Serie</div>
      </ion-card-content>
    </ion-card>

    <ion-card class="stat-card">
      <ion-card-content>
        <ion-icon name="bar-chart-outline" color="primary"></ion-icon>
        <div class="stat-value">{{overallStats.avgProgress}}%</div>
        <div class="stat-label">Durchschnitt</div>
      </ion-card-content>
    </ion-card>

    <ion-card class="stat-card">
      <ion-card-content>
        <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
        <div class="stat-value">{{overallStats.completedHabits}}</div>
        <div class="stat-label">Abgeschlossen</div>
      </ion-card-content>
    </ion-card>

    <ion-card class="stat-card">
      <ion-card-content>
        <ion-icon name="list-outline" color="medium"></ion-icon>
        <div class="stat-value">{{overallStats.totalHabits}}</div>
        <div class="stat-label">Gesamt</div>
      </ion-card-content>
    </ion-card>
  </div>


  <ion-card class="progress-card">
    <ion-card-header>
      <ion-card-title>Wöchentliche Aktivität</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="progress-container">
        <div *ngFor="let habit of weeklyProgress" class="progress-item">
          <div class="progress-header">
            <span class="habit-name">{{habit.name}}</span>
            <span class="progress-value" [style.color]="habit.color">
              {{habit.weeklyRate}}%
              <ion-icon 
                [name]="habit.trend > 0 ? 'trending-up' : 'trending-down'"
                [color]="habit.trend > 0 ? 'success' : 'danger'">
              </ion-icon>
            </span>
          </div>
          <div class="progress-bar">
            <div class="progress" 
                 [style.width]="habit.weeklyRate + '%'"
                 [style.background-color]="habit.color">
            </div>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
